sudo docker exec -itd --privileged poc-core-router-1 sh -c 'sed -i "s/bgpd=no/bgpd=yes/g" /etc/frr/daemons ; sed -i "s/ospfd=no/ospfd=yes/g" /etc/frr/daemons ; echo "interface eth0" > /etc/frr/frr.conf ; echo "ip ospf hello-interval 20" >> /etc/frr/frr.conf ; echo "ip ospf dead-interval 60" >> /etc/frr/frr.conf ; echo "interface eth1" >> /etc/frr/frr.conf ; echo "ip ospf hello-interval 20" >> /etc/frr/frr.conf ; echo "ip ospf dead-interval 60" >> /etc/frr/frr.conf ; echo "interface eth2" >> /etc/frr/frr.conf ; echo "ip ospf hello-interval 20" >> /etc/frr/frr.conf ; echo "ip ospf dead-interval 60" >> /etc/frr/frr.conf ; echo "interface eth3" >> /etc/frr/frr.conf ; echo "ip ospf hello-interval 20" >> /etc/frr/frr.conf ; echo "ip ospf dead-interval 60" >> /etc/frr/frr.conf ; echo "router ospf" >> /etc/frr/frr.conf ; echo "ospf router-id 90.1.1.1" >> /etc/frr/frr.conf ; echo "network 172.17.0.0/16 area 0" >> /etc/frr/frr.conf ; echo "network 10.0.0.0/16 area 0" >> /etc/frr/frr.conf ; echo "network 192.151.100.0/24 area 0" >> /etc/frr/frr.conf ; echo "network 7.0.200.0/24 area 0" >> /etc/frr/frr.conf' ; sudo docker restart poc-core-router-1

sudo docker exec -itd poc-internal-router-1 sh -c 'sed -i "s/bgpd=no/bgpd=yes/g" /etc/frr/daemons ; sed -i "s/ospfd=no/ospfd=yes/g" /etc/frr/daemons ; echo "interface eth0" > /etc/frr/frr.conf ; echo "ip ospf hello-interval 20" >> /etc/frr/frr.conf ; echo "ip ospf dead-interval 60" >> /etc/frr/frr.conf ; echo "interface eth1" >> /etc/frr/frr.conf ; echo "ip ospf hello-interval 20" >> /etc/frr/frr.conf ; echo "ip ospf dead-interval 60" >> /etc/frr/frr.conf ; echo "interface eth2" >> /etc/frr/frr.conf ; echo "ip ospf hello-interval 20" >> /etc/frr/frr.conf ; echo "ip ospf dead-interval 60" >> /etc/frr/frr.conf ; echo "interface eth3" >> /etc/frr/frr.conf ; echo "ip ospf hello-interval 20" >> /etc/frr/frr.conf ; echo "ip ospf dead-interval 60" >> /etc/frr/frr.conf ; echo "router ospf" >> /etc/frr/frr.conf ; echo "ospf router-id 90.1.1.2" >> /etc/frr/frr.conf ; echo "network 172.17.0.0/16 area 0" >> /etc/frr/frr.conf ; echo "network 10.0.0.0/16 area 0" >> /etc/frr/frr.conf ; echo "network 192.151.100.0/24 area 0" >> /etc/frr/frr.conf ; echo "network 7.0.200.0/24 area 0" >> /etc/frr/frr.conf' && sudo docker restart poc-internal-router-1

sudo docker exec -itd poc-customeredge-router-1 sh -c 'sed -i "s/bgpd=no/bgpd=yes/g" /etc/frr/daemons ; sed -i "s/ospfd=no/ospfd=yes/g" /etc/frr/daemons ; echo "interface eth0" > /etc/frr/frr.conf ; echo "ip ospf hello-interval 20" >> /etc/frr/frr.conf ; echo "ip ospf dead-interval 60" >> /etc/frr/frr.conf ; echo "interface eth1" >> /etc/frr/frr.conf ; echo "ip ospf hello-interval 20" >> /etc/frr/frr.conf ; echo "ip ospf dead-interval 60" >> /etc/frr/frr.conf ; echo "interface eth2" >> /etc/frr/frr.conf ; echo "ip ospf hello-interval 20" >> /etc/frr/frr.conf ; echo "ip ospf dead-interval 60" >> /etc/frr/frr.conf ; echo "interface eth3" >> /etc/frr/frr.conf ; echo "ip ospf hello-interval 20" >> /etc/frr/frr.conf ; echo "ip ospf dead-interval 60" >> /etc/frr/frr.conf ; echo "router ospf" >> /etc/frr/frr.conf ; echo "ospf router-id 90.1.1.3" >> /etc/frr/frr.conf ; echo "network 172.17.0.0/16 area 0" >> /etc/frr/frr.conf ; echo "network 10.0.0.0/16 area 0" >> /etc/frr/frr.conf ; echo "network 192.151.100.0/24 area 0" >> /etc/frr/frr.conf ; echo "network 7.0.200.0/24 area 0" >> /etc/frr/frr.conf ; echo "router bgp 1" >> /etc/frr/frr.conf ; echo "neighbor 7.0.200.12 remote-as 2" >> /etc/frr/frr.conf' && sudo docker restart poc-customeredge-router-1

sudo docker cp /home/vishal/Documents/poc/nsot/bgp_conf_temp.config poc-isp2ryu-1:/root/ryu/bgp_conf.py ; sudo docker exec -itd poc-isp2ryu-1 ryu-manager ryu.services.protocols.bgp.application --bgp-app-config-file ryu/bgp_conf.py

sudo docker exec -itd poc-isp2ryu-1 ryu-manager ./ryu/ryu/app/simple_switch_13.py

sudo docker exec -itd poc-voip-pbx-1 sh -c "ip route del default && ip route add default via 10.0.110.5"

[!Comment] PBX Config:

sudo docker exec -itd poc-voip-pbx-1 sh -c 'cp /etc/asterisk/sip.conf /etc/asterisk/sip_bk.conf ; echo "[general]" > /etc/asterisk/sip.conf ; echo "transport=udp" >> /etc/asterisk/sip.conf ; echo "[friends_internal](!)" >> /etc/asterisk/sip.conf ; echo "type=friend" >> /etc/asterisk/sip.conf ; echo "host=dynamic" >> /etc/asterisk/sip.conf ; echo "context=from-internal" >> /etc/asterisk/sip.conf ; echo "disallow=all" >> /etc/asterisk/sip.conf ; echo "allow=ulaw" >> /etc/asterisk/sip.conf ; echo "[demo-poc-user](friends_internal)" >> /etc/asterisk/sip.conf ; echo "secret=pocpass" >> /etc/asterisk/sip.conf'

[!Comment] End PBX Config:

[!Manual] mn --controller=remote,ip=7.0.64.2,port=6653


